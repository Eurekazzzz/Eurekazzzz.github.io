<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Ptengine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        function togglePassword() {
            const passwordInput = document.getElementById("password");
            const toggleIcon = document.getElementById("toggleIcon");
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleIcon.textContent = "üôà";
            } else {
                passwordInput.type = "password";
                toggleIcon.textContent = "üëÅ";
            }
        }

        function addCompany() {
            setTimeout(() => {
                const company = prompt("Enter Company Name:");
                if (!company) return;
                const account = prompt("Enter Account Email:");
                if (!account) return;
                const password = prompt("Enter Password:");
                if (!password) return;
                
                localStorage.setItem(company, JSON.stringify({ account, password }));
                renderCompanyButtons();
            }, 100);
        }

        function deleteCompany(company) {
            localStorage.removeItem(company);
            renderCompanyButtons();
        }

        function renderCompanyButtons() {
            const container = document.getElementById("companyButtons");
            container.innerHTML = "";
            Object.keys(localStorage).forEach(company => {
                try {
                    const data = JSON.parse(localStorage.getItem(company));
                    if (!data || !data.account || !data.password) return;

                    const btnWrapper = document.createElement("div");
                    btnWrapper.className = "flex items-center space-x-2 mt-2";

                    const btn = document.createElement("button");
                    btn.textContent = company;
                    btn.className = "flex-1 bg-gray-300 text-gray-800 py-2 rounded-lg hover:bg-gray-400";
                    btn.onclick = function() {
                        document.getElementById("email").value = data.account;
                        document.getElementById("password").value = data.password;
                    };

                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "‚ùå";
                    deleteBtn.className = "bg-red-500 text-white px-2 py-1 rounded-lg hover:bg-red-600";
                    deleteBtn.onclick = function() {
                        deleteCompany(company);
                    };

                    btnWrapper.appendChild(btn);
                    btnWrapper.appendChild(deleteBtn);
                    container.appendChild(btnWrapper);
                } catch (e) {
                    console.error("Error parsing localStorage data:", e);
                }
            });
        }

        document.addEventListener("DOMContentLoaded", renderCompanyButtons);
    </script>
</head>
<body class="flex flex-col h-screen items-center justify-center bg-gray-100">
    <div class="w-96 bg-white p-8 rounded-lg shadow-lg">
        <h2 class="text-2xl font-bold text-center text-gray-900 mb-6">Welcome</h2>
        <form>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm mb-1">Email</label>
                <input id="email" type="text" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div class="mb-4">
                <label class="block text-gray-700 text-sm mb-1">Super Email</label>
                <p class="text-gray-600 text-sm">yu.du@ptmind.com</p>
            </div>
            <div class="mb-4 relative">
                <label class="block text-gray-700 text-sm mb-1">Password</label>
                <input id="password" type="password" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button type="button" class="absolute right-3 top-9 text-gray-600" onclick="togglePassword()">
                    <span id="toggleIcon">üëÅ</span>
                </button>
            </div>
            <button type="submit" class="w-full bg-blue-900 text-white py-2 rounded-lg hover:bg-blue-800">
                Login
            </button>
        </form>
        <button onclick="addCompany()" class="w-full bg-green-500 text-white py-2 rounded-lg mt-4 hover:bg-green-600">+</button>
        <div id="companyButtons" class="mt-4"></div>
    </div>
</body>
</html>
